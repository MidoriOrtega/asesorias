create table calificacion
(
	idCali			smallint	not null primary key,
	numReseñas		smallint
)

create table usuario(
	cu			int not null primary key,
	tel			varchar(30),
	correo		varchar(30),
	nombre		char(30),
	contraseña	varchar(50),
	idCali		smallint references calificacion)

create table horario(
		cu int not null, 
		horarios varchar(50)
		primary key(cu, horarios))

create table apuntes
(	  idApuntes     smallint not null primary key,
  	  materia		char(20),
	  url			varchar(100),
	  profesor		char(40),
	  fecha			date,
	  cu			int references usuario,
	  idCali		smallint references calificacion
)

create table materia
	(idMateria	   	varchar(9) not null primary key,
	departamento	char(30),
	nombreMateria varchar(40))

create table peticion							
       	(idPeticion	smallint not null primary key,
	modalidad	varchar(30),
	fecha 		date,
	hora		datetime,
	cuDa		int	references usuario,
	cuRecibe	int	references usuario,
	idMateria	varchar(9)	references Materia)

create table asesoria(
	idAsesoria	smallint not null,
	fecha		date,
	hora		datetime,
	lugar		varchar(30),
	modalidad	varchar(30),
	idPeticion	smallint not null references peticion,
	cu		int references usuario,
	primary key(idAsesoria,idPeticion))

create table reseña
	(idReseña		smallint not null primary key,
	descripcion		varchar(300),
	idCali 			smallint references calificacion,
	cu				int references usuario)
	
create table usuario_materia(
	cu 				int not null references usuario,
	idMateria 		varchar(9) not null references materia,
	numAsesorias	smallint,
	numHoras 		smallint,
	numHorasServicioSocial smallint,
	primary key(cu, idMateria))


insert into usuario values(181866, '521001010', 'dhdz@itam.mx', 'Damian Hernandez', '1234', null)
insert into usuario values(171955, '521235429', 'rmen@itam.mx', 'Rodrigo Mendoza', '1940', null)
insert into horario values(181866, 'Lunes y viernes 10-12')
insert into horario values(181866, 'Martes y jueves 14-19')
insert into horario values(181866, 'Lunes y viernes 8-14')
insert into horario values(181866, 'Martes y jueves 13-15')
insert into materia values('EGN-17141', 'Estudios Generales', 'Ideas I')
insert into materia values('ECO-11101', 'Economía', 'Economía I')
insert into materia values('MAT-14100', 'Matemáticas', 'Cálculo Diferencial e Integral I')
insert into usuario_materia values(181866, 'MAT-14100', 0, 0, 0)
insert into usuario_materia values(171955, 'EGN-17141', 0, 0, 0)
insert into usuario_materia values(171955, 'ECO-11101', 0, 0, 0)

